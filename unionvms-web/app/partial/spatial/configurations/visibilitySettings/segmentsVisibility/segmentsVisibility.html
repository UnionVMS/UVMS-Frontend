<!--
Developed with the contribution of the European Commission - Directorate General for Maritime Affairs and Fisheries
Â© European Union, 2015-2016.

This file is part of the Integrated Fisheries Data Management (IFDM) Suite. The IFDM Suite is free software: you can
redistribute it and/or modify it under the terms of the GNU General Public License as published by the
Free Software Foundation, either version 3 of the License, or any later version. The IFDM Suite is distributed in
the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details. You should have received a
copy of the GNU General Public License along with the IFDM Suite. If not, see <http://www.gnu.org/licenses/>.
-->
<div class="segmentsVisiblity" ng-controller="SegmentsvisibilityCtrl">
	<div class="row">
    	<div class="form-group col-md-12">
    		<table class="table table-striped table-condensed table-no-border">
				<thead>
					<tr>
						<th>
							{{'spatial.visibility_configuration_table' | i18n}}
                            <input type="checkbox" title="{{'spatial.visibility_show_all_attr' | i18n}}" ng-model="selectAll.segments.table.values" ng-change="selectAllChange('segments','table')">
						</th>
						<th ng-if="settingsLevel !== 'report' || (settingsLevel === 'report' && (components.map || components.visibility.segment))">
							{{'spatial.visibility_configuration_popup' | i18n}}
                            <input type="checkbox" title="{{'spatial.visibility_show_all_attr_name' | i18n}}" ng-disabled="isAllNamesDisabled('positions','popup')" ng-model="selectAll.segments.popup.names" ng-change="selectAllNamesChange('segments','popup')" class="lb-name">
                            <input type="checkbox" title="{{'spatial.visibility_show_all_attr' | i18n}}" ng-model="selectAll.segments.popup.values" ng-change="selectAllChange('segments','popup')">
						</th>
						<th ng-if="settingsLevel !== 'report' || (settingsLevel === 'report' && (components.map || components.visibility.segment))">
							{{'spatial.visibility_configuration_label' | i18n}}
                            <input type="checkbox" title="{{'spatial.visibility_show_all_attr_name' | i18n}}" ng-disabled="isAllNamesDisabled('positions','labels')" ng-model="selectAll.segments.label.names" ng-change="selectAllNamesChange('segments','label')" class="lb-name">
                            <input type="checkbox" title="{{'spatial.visibility_show_all_attr' | i18n}}" ng-model="selectAll.segments.label.values" ng-change="selectAllChange('segments','label')">
						</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<ul dnd-list="configModel.visibilitySettings.segmentTableAttrs" dnd-allowed-types="['Table']">
								<li ng-repeat="attr in configModel.visibilitySettings.segmentTableAttrs"
								dnd-draggable="attr"
								dnd-type="attr.type"
								dnd-effect-allowed="move"
								dnd-moved="configModel.visibilitySettings.segmentTableAttrs.splice($index, 1);visibilitySettingsForm.$setDirty();">
									<div class="handle">:::</div>
									<span>{{attr.title}}</span>
                                    <input type="checkbox" title="{{'spatial.visibility_show_attr_val' | i18n}}" checklist-model="configModel.visibilitySettings.segments.table.values" checklist-value="attr.value" ng-change="onListItemChange('values','segments','table')">
								</li>
							</ul>
						</td>
						<td ng-if="settingsLevel !== 'report' || (settingsLevel === 'report' && (components.map || components.visibility.segment))">
							<ul dnd-list="configModel.visibilitySettings.segmentPopupAttrs" dnd-allowed-types="['Popup']">
								<li ng-repeat="attr in configModel.visibilitySettings.segmentPopupAttrs"
								dnd-draggable="attr"
								dnd-type="attr.type"
								dnd-effect-allowed="move"
								dnd-moved="configModel.visibilitySettings.segmentPopupAttrs.splice($index, 1);visibilitySettingsForm.$setDirty();">
									<div class="handle">:::</div>
									<span>{{attr.title}}</span>
                                    <input type="text" class="replacement" ng-model="configModel.visibilitySettings.segments.formPopupTitles[attr.value]">
                                    <input type="checkbox" title="{{'spatial.visibility_show_attr_name' | i18n}}" ng-disabled="isDisabledName('segments','popup',attr.value)" checklist-model="configModel.visibilitySettings.segments.popup.names" checklist-value="attr.value" ng-change="onListItemChange('names','segments','popup')" class="lb-name">
                                    <input type="checkbox" title="{{'spatial.visibility_show_attr_val' | i18n}}" checklist-model="configModel.visibilitySettings.segments.popup.values" checklist-value="attr.value" ng-change="onListItemChange('values','segments','popup')">
								</li>
							</ul>
						</td>
						<td ng-if="settingsLevel !== 'report' || (settingsLevel === 'report' && (components.map || components.visibility.segment))">
							<ul dnd-list="configModel.visibilitySettings.segmentLabelAttrs" dnd-allowed-types="['Label']">
								<li ng-repeat="attr in configModel.visibilitySettings.segmentLabelAttrs"
								dnd-draggable="attr"
								dnd-type="attr.type"
								dnd-effect-allowed="move"
								dnd-moved="configModel.visibilitySettings.segmentLabelAttrs.splice($index, 1);visibilitySettingsForm.$setDirty();">
									<div class="handle">:::</div>
									<span>{{attr.title}}</span>
                                    <input type="text" class="replacement" ng-model="configModel.visibilitySettings.segments.formLabelTitles[attr.value]">
                                    <input type="checkbox" title="{{'spatial.visibility_show_attr_name' | i18n}}" ng-disabled="isDisabledName('segments','labels',attr.value)" checklist-model="configModel.visibilitySettings.segments.labels.names" checklist-value="attr.value" ng-change="onListItemChange('names','segments','label')" class="lb-name">
                                    <input type="checkbox" title="{{'spatial.visibility_show_attr_val' | i18n}}" checklist-model="configModel.visibilitySettings.segments.labels.values" checklist-value="attr.value" ng-change="onListItemChange('values','segments','label')">
								</li>
							</ul>
						</td>
					</tr>
				</tbody>
			</table>
    	</div>
    </div>
</div>
